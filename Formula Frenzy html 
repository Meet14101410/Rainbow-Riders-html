<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Formula Frenzy</title>
<style>
  :root{--bg:#0f1724;--card:#071029;--accent:#22c55e}
  *{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto}
  body{margin:0;background:linear-gradient(180deg,var(--bg),#071029);color:#e6eef8;display:flex;align-items:center;justify-content:center;height:100vh}
  .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);width:360px;padding:18px;border-radius:12px;box-shadow:0 6px 24px rgba(2,6,23,.6);text-align:center}
  .formula{font-size:40px;font-weight:700;letter-spacing:2px;margin:8px 0}
  .meta{display:flex;justify-content:space-between;margin-bottom:10px;font-size:14px;opacity:.9}
  .choices{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  button.opt{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,.06);background:transparent;color:inherit;cursor:pointer}
  button.opt.correct{outline:3px solid rgba(34,197,94,.18);background:rgba(34,197,94,.06)}
  button.opt.wrong{outline:3px solid rgba(239,68,68,.12);background:rgba(239,68,68,.04)}
  .small{font-size:13px;opacity:.9}
  .footer{display:flex;gap:8px;justify-content:center;margin-top:12px}
  button.control{padding:8px 12px;border-radius:8px;border:none;background:var(--accent);color:#042014;cursor:pointer}
  .hint{font-size:12px;opacity:.8;margin-top:8px}
</style>
</head>
<body>
  <div class="card" role="application" aria-label="Formula Frenzy">
    <div class="meta"><div class="small">Score: <span id="score">0</span></div><div class="small">Time: <span id="time">30</span>s</div></div>
    <div class="formula" id="formula">H₂O</div>
    <div class="hint" id="hint">Select the correct compound name</div>
    <div class="choices" id="choices"></div>
    <div class="footer">
      <button class="control" id="skip">Skip</button>
      <button class="control" id="reset">Restart</button>
    </div>
  </div>

<script>
const qs = [
  {f:"H2O", name:"Water", opts:["Hydrogen peroxide","Water","Hydrogen oxide","Hydroxide"]},
  {f:"CO2", name:"Carbon dioxide", opts:["Carbon monoxide","Carbonic acid","Carbon dioxide","Methane"]},
  {f:"NaCl", name:"Sodium chloride", opts:["Sodium chloride","Potassium chloride","Sodium oxide","Chlorine gas"]},
  {f:"C6H12O6", name:"Glucose", opts:["Fructose","Glucose","Cellulose","Ethanol"]},
  {f:"NH3", name:"Ammonia", opts:["Ammonia","Nitric oxide","Azide","Amide"]},
  {f:"H2SO4", name:"Sulfuric acid", opts:["Sulfuric acid","Sulfur dioxide","Hydrosulfuric acid","Sulfate"]},
  {f:"O2", name:"Oxygen", opts:["Ozone","Oxygen","Hydrogen peroxide","Nitrogen"]},
  {f:"CH4", name:"Methane", opts:["Methanol","Methane","Ethane","Propane"]}
];

let score=0, time=30, idx=0, running=false, timerId=null;
const $ = id=>document.getElementById(id);
const shuffle = a=>a.sort(()=>Math.random()-0.5);

function start() {
  score=0;time=30;idx=0;running=true;
  $("score").textContent=score;$("time").textContent=time;
  shuffle(qs);next();
  clearInterval(timerId);
  timerId=setInterval(()=>{ if(time>0){ time--; $("time").textContent=time } else end() },1000);
}

function end(){
  running=false; clearInterval(timerId);
  alert('Time up! Score: '+score);
}

function next(){
  if(!running) return;
  const q=qs[idx++ % qs.length];
  $("formula").textContent = q.f.replace(/2/g,'₂').replace(/3/g,'₃').replace(/6/g,'₆'); // simple subscript prettify
  $("hint").textContent = "Select the correct compound name";
  renderChoices(q);
}

function renderChoices(q){
  const wrap=$("choices"); wrap.innerHTML='';
  const opts=shuffle([...q.opts]);
  opts.forEach(o=>{
    const b=document.createElement('button');
    b.className='opt';
    b.textContent=o;
    b.onclick=()=>choose(b,o===q.name);
    wrap.appendChild(b);
  });
}

function choose(btn,correct){
  if(!running) return;
  Array.from($("choices").children).forEach(b=>b.disabled=true);
  if(correct){ btn.classList.add('correct'); score+=10; $("score").textContent=score; }
  else{ btn.classList.add('wrong'); score=Math.max(0,score-5); $("score").textContent=score;
    // show correct
    Array.from($("choices").children).find(b=>b.textContent===qs[(idx-1)%qs.length].name)?.classList.add('correct');
  }
  setTimeout(next,700);
}

$("skip").addEventListener('click',()=>{ if(!running) start(); else { idx++; next(); score=Math.max(0,score-2); $("score").textContent=score }});
$("reset").addEventListener('click',()=>{ clearInterval(timerId); start(); });

start();
</script>
</body>
</html>
